apply plugin: 'java'
apply plugin: 'maven'

apply from: 'source.gradle'

task setVersion {
  description  'Defines the version from the state in git'
  version = getVersionName()
  println 'Version: ' + version
}

group = 'org.apache.mesos.kibana'

sourceCompatibility = '1.7'
targetCompatibility = '1.7'

jar {
  dependsOn 'setVersion'
  from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } } // Include dependencies
  manifest {
    attributes 'Main-Class': 'org.apache.mesos.kibana.KibanaFramework'
  }
}

repositories {
    maven { url "http://repo.maven.apache.org/maven2" }
}

dependencies {
    compile (
        [group:'org.apache.mesos', name: 'mesos',version:'0.22.1'],
        [group:'org.slf4j', name:'slf4j-api', version: '1.7.7'],
        [group:'org.apache.logging.log4j', name:'log4j-api', version: '2.0.2'],
        [group:'org.apache.logging.log4j', name:'log4j-core', version: '2.0.2'],
        [group:'org.apache.logging.log4j', name:'log4j-slf4j-impl', version: '2.0.2'])
    testCompile (
        [group:'org.mockito', name:'mockito-all', version: '1.10.19'],
        [group: 'junit', name: 'junit', version: '4.10'])
}


task wrapper(type: Wrapper) {
    gradleVersion = '2.3'
}
